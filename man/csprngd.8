.\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.40.7.
.TH CSPRNGD "8" "June 2012" "csprngd daemon version 1.0" "System Administration Utilities"
.SH NAME
csprngd \- manual page for csprngd daemon version 1.0
.SH SYNOPSIS
.B csprngd
[\fIOPTION\fR...]
.SH DESCRIPTION
Daemon to feed entropy from cryptographically secure pseudorandom number
generator to the kernel entropy pool.
.IP
Operation mode options
.TP
\fB\-\-foreground\fR
Run in the foreground.
.TP
\fB\-g\fR, \fB\-\-no\-fips\fR
Turn off FIPS 140\-2 random number tests
validation. Default: only data passing FIPS 140\-2
random number tests are sent to the kernel entropy
pool.
.TP
\fB\-p\fR, \fB\-\-pidfile\fR=\fIfile\fR
Path to the PID file for daemon mode.
.TP
\fB\-v\fR, \fB\-\-verbose\fR
Verbosity level. Two verbosity levels are
supported. Second level (most verbose) is
activated with '\-v \fB\-v\fR'
.TP
\fB\-\-write_statistics\fR=\fIN\fR
Write statistics about the number of provided
bytes & entropy and results of FIPS tests every
"N" seconds. 0 to disable. Default: 3600s.
.IP
Cryptographically secure pseudorandom number generator options
.TP
\fB\-\-entropy_file\fR=\fIFILE\fR
Use FILE as the source of RANDOM bytes for
CTR_DRBG entropy input. It implies
\fB\-\-entropy\-source\fR=\fIEXTERNAL\fR
.TP
\fB\-\-entropy_source\fR=\fISOURCE\fR
Specify SOURCE of RANDOM bytes for CTR_DRBG
entropy input. One of the following can be used
HAVEGE|SHA1_RNG|MT_RNG|STDIN|EXTERNAL. Default:
HAVEGE.
.TP
\fB\-d\fR, \fB\-\-derivation_function\fR
Use DERIVATION FUNCTION. It will process HAVEGE
output through DERIVATION FUNCTION before
reseed/change the state of CTR_DRBG. Default:
DERIVATION FUNCTION is not used.
.TP
\fB\-\-additional_file\fR=\fIFILE\fR Use FILE as source of RANDOM bytes for CTR_DRBG
additional_input. It implies
\fB\-\-additional_source\fR=\fIEXTERNAL\fR.
.TP
\fB\-\-additional_source\fR=\fISOURCE\fR
Use additional input. Specify SOURCE of
RANDOM bytes for CTR_DRBG additional input. One of
the following can be used
NONE|HAVEGE|SHA1_RNG|MT_RNG|STDIN|EXTERNAL.
Default: NONE (additional input is not used).
.TP
\fB\-m\fR, \fB\-\-max_num_of_blocks\fR=\fIMAX\fR
Maximum number MAX of CTR_DRBG blocks produced
before reseed is performed. Default: 512 blocks.
.TP
\fB\-\-no\-randomize_num_of_blks\fR
Produce MAX of CTR_DRBG blocks each time.
Default: uniform random distribution [1,MAX] is
used to get the number of generated CTR_DRBG
blocks between reseeds.
.IP
Output options
.TP
\fB\-e\fR, \fB\-\-entropy_per_bit\fR=\fIN\fR
Entropy per bit of data written to the kernel
entropy pool. Default 1.0. Allowed values
0.7<N<=1.0
.TP
\fB\-\-min_entropy\fR=\fIN\fR
Minimum number of entropy "N" written to the
kernel random device at one time. Default: entropy
64. (which is equval to 8 bytes when
entropy_per_bit == 1.
.TP
\fB\-o\fR,                              \fB\-\-random\-device\fR=\fIfile\fR
Kernel device used for entropy output. Default:
/dev/random
.TP
\fB\-t\fR, \fB\-\-fill\-interval\fR=\fIN\fR
When kernel entropy level is bigger than value
specified at
/proc/sys/kernel/random/write_wakeup_threshold
.PP
then write to the kernel random device every "N"
.IP
seconds. 0 to disable. Default: 30s.
.TP
\fB\-u\fR, \fB\-\-upper_limit\fR=\fIN\fR
Level "N" to which entropy level should be
filled\-up. "N" is the absolute number of bits or a
percentage of the kernel pool size. Default: 50%.
Allowed range:
.PP
0 <= N <=<kernel random pool size> or
0% <= N <= 100%
.IP
HAVEGE parameters:
.TP
\fB\-\-havege_data_cache_size\fR=\fISIZE\fR
CPU data cache SIZE in KiB. Default: auto
detected.
.TP
\fB\-\-havege_inst_cache_size\fR=\fISIZE\fR
CPU instruction cache size in KiB. Default: auto
detected.
.TP
\-?, \fB\-\-help\fR
Give this help list
.TP
\fB\-\-usage\fR
Give a short usage message
.TP
\fB\-V\fR, \fB\-\-version\fR
Print program version
.PP
Mandatory or optional arguments to long options are also mandatory or optional
for any corresponding short options.
.SH EXAMPLES
csprngd
.IP
Run the daemon to refill the entropy. The operation is logged via syslog
and can be usually tracked at /var/log/syslog)
.PP
csprngd \fB\-v\fR \fB\-v\fR \fB\-\-foreground\fR
.IP
Run in the foreground in the most verbose mode
.PP
csprngd \fB\-v\fR  \fB\-\-foreground\fR \fB\-\-write_statistics\fR=\fI30\fR
.IP
Run in the foreground and output statics information on the stderr
.PP
csprngd \fB\-\-upper_limit\fR=\fI75\fR%
.IP
Fill entropy level upto 75% of kernel entropy poolsize. This is more
agressive than the default mode. While offering slightly better performance,
the kernel entropy pool will be dominated by csprgnd data.
.PP
csprngd \fB\-\-fill\-interval\fR=\fI10\fR
.IP
Refill kernel's entropy at least every 10 seconds to 50% of the kernel
entropy poolsize. Using this, available entropy will stay close to
50% of the kernel entropy poolsize. The kernel entropy pool
will be dominated by csprgnd data.
.PP
time dd if=/dev/random count=8192 bs=8192 iflag=fullblock of=/dev/null
.IP
Test the reading speed from /dev/random. When csprngd is running,
reading speed of about 2MB/s can be expected
.PP
watch \fB\-n1\fR cat /proc/sys/kernel/random/entropy_avail
.IP
Watch available entropy
.PP
watch fuser \fB\-uvm\fR /dev/random
.IP
Watch processes accessing /dev/random device
.SH AUTHOR
Written by Jirka Hladky
.SH "REPORTING BUGS"
Report bugs to <hladky DOT jiri AT gmail DOT com>.
.SH COPYRIGHT
Copyright \(co 2011\-2012 by Jirka Hladky
.PP
.br
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
